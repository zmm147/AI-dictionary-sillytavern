<div class="ai-dictionary-settings" id="ai-dictionary-extension-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>AI Dictionary</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <div class="ai-dict-checkbox-row">
                <label for="ai-dict-enabled" class="checkbox_label">
                    <input type="checkbox" id="ai-dict-enabled" name="ai-dict-enabled">
                    <span>Enable</span>
                </label>
                <label for="ai-dict-direct-lookup" class="checkbox_label" title="Android: 点击单词直接查词，长按选择显示图标；此选项仅对iOS和桌面端有效">
                    <input type="checkbox" id="ai-dict-direct-lookup" name="ai-dict-direct-lookup">
                    <span>Direct Lookup <small style="color:#888">(Android无效)</small></span>
                </label>
            </div>

            <div class="ai-dict-checkbox-row">
                <label for="ai-dict-enable-top-bar" class="checkbox_label" title="在顶部栏添加快捷图标">
                    <input type="checkbox" id="ai-dict-enable-top-bar" name="ai-dict-enable-top-bar">
                    <span>启用顶部栏图标</span>
                </label>
            </div>

            <label for="ai-dict-connection-profile">Connection Profile (API预设):</label>
            <select id="ai-dict-connection-profile" class="text_pole">
                <option value="">使用当前连接</option>
            </select>

            <div class="ai-dict-prompt-label-row">
                <label for="ai-dict-system-prompt">System Prompt:</label>
                <button id="ai-dict-reset-system-prompt" class="menu_button menu_button_icon" title="重置为默认">
                    <i class="fa-solid fa-rotate-left"></i>
                </button>
            </div>
            <textarea id="ai-dict-system-prompt" class="text_pole textarea_compact" rows="2" placeholder="Enter system prompt for dictionary lookups"></textarea>

            <div class="ai-dict-prompt-label-row">
                <label for="ai-dict-user-prompt">User Prompt (支持变量: %word%, %context%):</label>
                <button id="ai-dict-reset-user-prompt" class="menu_button menu_button_icon" title="重置为默认">
                    <i class="fa-solid fa-rotate-left"></i>
                </button>
            </div>
            <textarea id="ai-dict-user-prompt" class="text_pole textarea_compact" rows="5" placeholder="Enter user prompt for dictionary lookups"></textarea>

            <label for="ai-dict-context-range">Context Range (上下文范围):</label>
            <select id="ai-dict-context-range" class="text_pole">
                <option value="all">全段 (所有同级标签的段落)</option>
                <option value="single">单段 (只有一段文本)</option>
                <option value="sentence">一句 (段落中的一个句子)</option>
            </select>

            <label for="ai-dict-icon-position">Icon Position:</label>
            <select id="ai-dict-icon-position" class="text_pole">
                <option value="bottom-left">Bottom Left</option>
                <option value="top-left">Top Left</option>
                <option value="top-right">Top Right</option>
                <option value="bottom-right">Bottom Right</option>
            </select>

            <hr class="sysHR">

            <div class="ai-dict-checkbox-row">
                <label for="ai-dict-auto-collapse-youdao" class="checkbox_label">
                    <input type="checkbox" id="ai-dict-auto-collapse-youdao" name="ai-dict-auto-collapse-youdao">
                    <span>自动折叠有道释义</span>
                </label>
                <label for="ai-dict-auto-fetch-ai" class="checkbox_label">
                    <input type="checkbox" id="ai-dict-auto-fetch-ai" name="ai-dict-auto-fetch-ai">
                    <span>自动获取AI释义</span>
                </label>
            </div>

            <div class="ai-dict-checkbox-row">
                <label for="ai-dict-fetch-ai-on-youdao-expand" class="checkbox_label">
                    <input type="checkbox" id="ai-dict-fetch-ai-on-youdao-expand" name="ai-dict-fetch-ai-on-youdao-expand">
                    <span>折叠有道释义时自动获取AI</span>
                </label>
            </div>

            <hr class="sysHR">

            <div class="ai-dict-prompt-label-row">
                <label for="ai-dict-deep-study-prompt">深度学习提示词 (支持变量: %word%):</label>
                <button id="ai-dict-reset-deep-study-prompt" class="menu_button menu_button_icon" title="重置为默认">
                    <i class="fa-solid fa-rotate-left"></i>
                </button>
            </div>
            <textarea id="ai-dict-deep-study-prompt" class="text_pole textarea_compact" rows="5" placeholder="Enter deep study prompt"></textarea>

            <hr class="sysHR">

            <div class="ai-dict-checkbox-row">
                <label for="ai-dict-highlight-confusables" class="checkbox_label">
                    <input type="checkbox" id="ai-dict-highlight-confusables" name="ai-dict-highlight-confusables">
                    <span>高亮收藏的形近词</span>
                </label>
            </div>

            <div id="ai-dict-highlight-color-container" style="display: none; margin-top: 10px;">
                <label for="ai-dict-highlight-color">高亮颜色:</label>
                <input type="color" id="ai-dict-highlight-color" class="text_pole" style="width: 60px; height: 30px; padding: 2px; cursor: pointer;">
            </div>

            <hr class="sysHR">

            <div class="ai-dict-actions-row">
                <button id="ai-dict-stats-btn" class="menu_button" title="查看查词统计">
                    <i class="fa-solid fa-chart-bar"></i>
                    <span>查词统计</span>
                </button>
            </div>

            <hr class="sysHR">

            <div class="ai-dict-checkbox-row">
                <label for="ai-dict-immersive-review" class="checkbox_label">
                    <input type="checkbox" id="ai-dict-immersive-review" name="ai-dict-immersive-review">
                    <span>沉浸式复习</span>
                </label>
            </div>
            <div class="extension_info" style="margin-top: 5px; margin-bottom: 10px;">
                <small>
                    <i class="fa-solid fa-lightbulb"></i>
                    <span>当单词被查询第2次时，自动加入复习词组。每次发消息时，提示AI在回复中自然使用这些词（最多20个）。AI使用后的单词将进入艾宾浩斯记忆周期（1、2、4、7、15、30天），完成全部周期后视为掌握。</span>
                </small>
            </div>

            <div id="ai-dict-review-prompt-container" style="display: none;">
                <div class="ai-dict-prompt-label-row">
                    <label for="ai-dict-review-prompt">复习提示词 (变量: %words%):</label>
                    <button id="ai-dict-reset-review-prompt" class="menu_button menu_button_icon" title="重置为默认">
                        <i class="fa-solid fa-rotate-left"></i>
                    </button>
                </div>
                <textarea id="ai-dict-review-prompt" class="text_pole textarea_compact" rows="2" placeholder="Enter review prompt"></textarea>
            </div>

            <hr class="sysHR">

            <div class="extension_info">
                <div class="flex-container">
                    <div class="flex1">
                        <small>
                            <i class="fa-solid fa-circle-info"></i>
                            <span>Select text on the page to trigger the lookup. If "Direct Lookup" is enabled, the definition will appear immediately. Otherwise, click the icon that appears next to the selection.</span>
                        </small>
                    </div>
                </div>
            </div>

            <hr class="sysHR">

            <div class="ai-dict-actions-row">
                <button id="ai-dict-farm-btn" class="menu_button" title="学习累了？来种种菜吧！">
                    <i class="fa-solid fa-seedling"></i>
                    <span>农场游戏</span>
                </button>
            </div>
        </div>
    </div>
</div>
